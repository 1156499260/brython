<!doctype html>
<html>
<head>
<meta charset="utf-8">

<script type="text/javascript" src="/src/brython.js"></script>

<script id="python_script" type="text/python">
import sys
import turtle 
from browser import document, timer

def inform(*args):
    document["status-info"].html = ''.join(args)

def _write(*args):
    document["turtle-print-output"].html += ''.join(args)
def __write(*args):
    document["turtle-print-output"].html += '<span class="error">' + ''.join(args) + '</span>'

sys.stdout.write = _write
sys.stderr.write = __write

def clear_print():
    document["turtle-print-output"].html = ''

@document["run"].bind("click")
def done(ev):
    inform("Processing")
    # delay to allow updated DOM with above text to be shown.
    timer.set_timeout(exec_code, 1)

def exec_code():
    _code= document["source"].text 
    exec(_code)
    inform("")

@document["clear"].bind("click")
def clear(ev):
    turtle.restart()
    inform("")
    clear_print()

@document["demo_selector"].bind("change")
def copy_content(ev):
    choice = document["demo_selector"].value
    document["source"].text = document['demo'+ str(choice)].text
    document["info"].html = document['info'+ str(choice)].html
    clear(ev)

# Start with first demo
document["source"].text = document["demo1"].text
document["info"].html = document["info1"].html
</script>

<style>
  pre {
    max-width: 800px;    
    overflow: auto;
    word-break: normal !important;
    word-wrap: normal !important;
    white-space: pre !important;
  }
  pre#source {
    border: 1px solid blue;
    background-color:antiquewhite;
  }
  pre#turtle-docstring {
    background-color: white;
    max-width: 800px;
  }
  hr {
    clear: both;
  }
  #info {
    max-width: 800px;
    border: 1px dotted black;
  }

  pre#turtle-print-output {
    background-color: black;
    color: white;
    font-weight: bolder;
    min-height: 50px;
    height: auto;
    max-height: 200px;
  }

  button {
    margin: 20px;
    padding: 10px;
  }
  #status-info {
    color: darkred;
    font-weight: bolder;
  }
  .error {
    color: red;
  }
</style>

</head>

<body onload="brython(1)">
<h1>Turtle demo</h1>

<p>Select the desired demo.
<select id="demo_selector">
  <option value="1">Square with default turtle</option> 
  <option value="2">Custom container and instant drawing</option>
  <option value="3">All the turtles</option>
  <option value="4">Writing samples</option>
  <option value="5">OOP reference: Turtle move and draw</option>
</select>
Note that the content is editable.
</p>
<div id="info"></div>

<p><button id="run">Run</button> <span id="status-info"></span> <button id="clear">Clear</button></p>
<pre id="turtle-print-output"></pre>

<pre id="source" style="float:left" contenteditable="true">
</pre>

<div id="turtle-div" style="float:left;border:1px solid green; margin-left:50px;"> </div>

<div id='info1' style='display:none'>
Simple square drawing demo and writing text with all 
default configuration values except for the container 
and also illustrating various color modes.
</div>

<div id='demo1' style="display:none">import turtle
turtle.set_defaults(turtle_canvas_wrapper=document['turtle-div'])

t = turtle.Turtle()

for c in ['red', '#00ff00', '#fa0', 'rgb(0,0,200)']:
    t.color(c)
    t.forward(100)
    t.left(90)

# dot() and write() do not require the pen to be down
t.penup()
t.goto(-30, -100)
t.dot(40, 'rgba(255, 0, 0, 0.5')
t.goto(30, -100)
t.dot(40, 'rgba(0, 255, 0, 0.5')
t.goto(0, -70)
t.dot(40, 'rgba(0, 0, 255, 0.5')

t.goto(0, 125)
t.color('purple')
t.write("I love Brython!!", font=("Arial", 20, "normal"))

turtle.done()
</div>

<div id='info2' style='display:none'>
Changing default size and specifying existing html element as 
container for the turtle canvas. This container is styled
so as to have a green border.

This is also meant as a test for the correct turtle orientation,
and for demonstrating instant (fastest) drawing.
</div>

<div id='demo2' style="display:none">import turtle

turtle.set_defaults(
    canvwidth = 600,  # default is 500
    canvheight = 400,  # default is 500
    turtle_canvas_wrapper = document['turtle-div']
)

t = turtle.Turtle("turtle")
t.width(3)

for c in ['red', 'blue', 'orange', 'green', 'purple', 'brown']:
    t.color(c, "white")
    t.forward(100)
    t.left(60)

###  bottom half drawn "instantly"
t.speed(0)
for c in ['red', 'blue', 'orange', 'green', 'purple', 'brown']:
    t.color(c)
    t.forward(100)
    t.right(60)

turtle.done()
</div>


<div id='info3' style='display:none'>
Showing the available turtles, 
how to use <code>stamp()</code> and
how to change the background color.
</div>

<div id='demo3' style="display:none">import turtle

turtle.set_defaults(turtle_canvas_wrapper=document['turtle-div'])

def draw_square(t):
    t.begin_fill()
    for i in range(4):
        t.forward(40)
        t.left(90)
    t.end_fill()

for name,c,y in [(None, 'black', 200),  # same as "classic"
                 ("classic", 'blue', 150),
                 ("arrow", 'orange', 100),
                 ("circle", 'red', 50),
                 ("square", 'purple', 0),
                 ("triangle", 'brown', -50),
                 ("turtle", ('green', 'white'), -100)]:
    if name is not None:
        t = turtle.Turtle(name)
    else: 
        t = turtle.Turtle()
        screen = t.getscreen()
        screen.bgcolor('rgb(255, 255, 200)')
    t.penup()
    if len(c) == 2:
        t.color(c[0], c[1])
    else:
        t.color(c)
    t.goto(-100, y)
    t.pendown()
    draw_square(t)
    t.penup()
    t.forward(100)
    t.stamp()
screen.bgcolor('white')

turtle.done()
</div>

<div id='info4' style='display:none'>
Demonstrating some writing parameters.
</div>

<div id='demo4' style="display:none">import turtle

turtle.set_defaults(
    turtle_canvas_wrapper = document['turtle-div']
  )
t = turtle.Turtle()
t.penup()


t.color('rgba(255, 0, 0, 0.5)')
t.dot(5)
t.color('black')
t.write("Default settings")

t.goto(0, 50)
t.color("red")
t.write("Left-aligned", align='left', font=("Verdana", 20, "italic"))

t.goto(0, 100)
t.color("blue")
t.write("Center-aligned", align='center', font=("Times Roman", 20, "oblique"))

t.goto(0, 150)
t.color("green")
t.write("Right-aligned", align='right', font=("Courier", 20, "normal"))

turtle.done()
</div>

<div id='info5' style='display:none'>
  <h2>OOP version: comparison with CPython</h2>
    <p><a href="https://docs.python.org/3/library/turtle.html#turtle-methods">Turtle motion: move and draw.</a></p>

<h4>Move and draw</h4>
<pre>
forward() | fd()
backward() | bk() | back()
right() | rt()
left() | lt()
goto() | setpos() | setposition()
setx()
sety()
setheading() | seth()
home()
circle()
dot()
stamp()
speed()
</pre>
<pre class='error'>
clearstamp() : not implemented
clearstamps() : not implemented
undo() : not implemented
</pre>
<h4>Tell Turtleâ€™s state</h4>
<pre>
position() | pos()
towards()
xcor()
ycor()
heading()
distance()</pre>
<h4>Setting and measurement</h4>
<pre>degrees()
radians()
</pre>
</div>

<div id='demo5' style="display:none">import turtle
turtle.set_defaults(turtle_canvas_wrapper=document['turtle-div'])

print("All expected values written rounded to nearest integer")

t = turtle.Turtle("turtle")
t.speed(1)
t.forward(50)
print("Should be (50, 0):", t.position())
print("Should be 50: ", t.xcor())
print("Should be 0: ", t.ycor())
t.left(90)
t.color("blue")
t.speed(2)
t.fd(50)


print("Should be (50, 50):", t.pos())
print("Should be 225: ", t.towards(0, 0))
print("Should be 90: ", t.heading())
print("Should be 71:", t.distance(0, 0))

t.degrees(400)
print("Should be 100: ", t.heading())
t.radians()
print("Should be Pi/2: ", t.heading())
t.degrees()
print("Should be 90: ", t.heading())

t.lt(90)
t.color("orange")
t.backward(50)
t.right(90)
t.color("green")
t.back(50)
t.rt(90)
t.color("red")
t.bk(50)
t.stamp()
t.speed(4)

t.color("black", "white")
t.goto(-100, 100)
t.stamp()
t.color("blue", "yellow")
t.setposition(0, 100)
t.stamp()
t.color("green", "white")
t.setpos(100, 100)
t.stamp()

t.speed(10)
t.color("orange")
t.sety(-100)
t.setx(-100)
t.stamp()

t.color("cyan")
t.home()
t.stamp()

t.color("green")
t.width(4)
t.setheading(180)
t.forward(150)
t.seth(90)
t.fd(20)

t.dot(30, 'rgba(255, 0, 0, 0.2)')
t.color('red')
t.speed(0)
t.forward(30)
t.left(90)
t.circle(30)

turtle.done()
</div>



</body>

</html>
